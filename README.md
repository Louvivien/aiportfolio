
# ğŸ“ˆ AI Portfolio Tracker

![Python](https://img.shields.io/badge/python-3.13-blue)
![FastAPI](https://img.shields.io/badge/fastapi-0.95.2-green)
![Streamlit](https://img.shields.io/badge/streamlit-1.24-orange)
![MongoDB](https://img.shields.io/badge/mongoDB-Atlas-green)

## ğŸš€ Project Overview

A self-hosted portfolio tracker with:

- ğŸ”– Tagging and tag roll-ups
- ğŸ“Š Interactive, sortable positions table
- ğŸ’¹ Live intraday & price fetching (Yahoo Finance)
- ğŸ¨ Google Sheetsâ€“style conditional formatting (red â†’ yellow â†’ green scales)
- ğŸ’µ Automatic currency detection & formatting (USD, EUR, GBP, â€¦)
- ğŸ§© Streamlit front-end + FastAPI backend
- ğŸ“‚ MongoDB persistence

---

## ğŸ› ï¸ Prerequisites

- macOS
- Python **3.13+**
- MongoDB Atlas account
- [Node.js & npm] (optional, if adding a React front-end later)

---

## ğŸ”§ Setup

```bash
# Clone repository
git clone https://github.com/Louvivien/aiportfolio.git
cd aiportfolio

# Create virtual environment
python3 -m venv .venv
source .venv/bin/activate

# Install dependencies
pip install -r requirements.txt
````

---

## ğŸƒâ€â™‚ï¸ Running

### Backend (FastAPI)

```bash
uvicorn backend.app.main:app --reload
```

API docs available at:

* Swagger: [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)
* Redoc: [http://127.0.0.1:8000/redoc](http://127.0.0.1:8000/redoc)

### Frontend (Streamlit)

```bash
cd frontend
streamlit run app.py
```

---

## âœ… Testing

### Unit & CRUD tests

```bash
pytest backend/tests -q
```

### E2E (Playwright)

```bash
pytest frontend/tests -q
```

---

## ğŸ§¹ Linting & Formatting

We use **pre-commit** with:

* `black` (formatting)
* `isort` (imports)
* `flake8` (linting)

Install Git hooks:

```bash
pre-commit install
```

Run checks manually:

```bash
pre-commit run --all-files
```

---

## ğŸ“š Documentation

* API docs auto-generated by FastAPI (`/docs`, `/redoc`)
* Inline Python docstrings in `backend/app/*.py`
* Front-end logic documented in `frontend/app.py`

---

## âœ¨ Features in Detail

* **Positions Table**

  * Sortable by any column (Symbol, Name, Qty, Cost, Value, P/L, Intraday, â€¦)
  * Reset to original DB order

* **Conditional Formatting**

  * P/L: red â†’ yellow â†’ green gradient
  * Intraday %: asymmetric (negatives red â†’ yellow, positives yellow â†’ green)
  * White text for readability inside colored cells

* **Yahoo Finance Integration**

  * Fetches:

    * Current price
    * Intraday % change
    * Currency
    * Company name

* **Totals Section**

  * Invested capital (all positions)
  * Market value (open positions)
  * P/L vs Invest All (absolute & %)

---

## ğŸ¤ Contributing

1. Fork & branch:

   ```bash
   git checkout -b feature/XYZ
   ```
2. Commit with clear messages
3. Open a PR using this template:

   * What you did
   * Why it matters
   * Screenshots (if UI)
   * Link related Jira ticket
